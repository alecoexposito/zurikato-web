/*! @name @aleco/videojs-aleco-rangeslider @version 0.0.0 @license MIT */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).videojsAlecoRangeslider=t()}(this,function(){"use strict";var e=function(e,t,o,s){e.addEventListener(t,o,s)},t=function(e,t,o,s){e.removeEventListener(t,o,s)},o=function(e,t){e.classList.add(t)},s=function(e,t){e.classList.remove(t)},i=function(e,t){return parseFloat(e.toFixed(t))},n={left:null,right:null,options:{locked:!1}},r={},a=videojs.registerPlugin||videojs.plugin,l=function(a){var l=this;this.ready(function(){!function(r,a){r.addClass("vjs-aleco-rangeslider");var l=videojs.getComponent("Component"),d=videojs.extend(l,{constructor:function(e,t){l.apply(this,arguments),this.inDownloadMode=!1,this.minTime=null,this.maxTime=null;var o=this;this.on("click",function(){if(this.inDownloadMode)jQuery(".vjs-download-button").css("font-size","10px"),jQuery(".vjs-download-button span").removeClass("fa-download").addClass("fa-spinner fa-spin"),console.log("begin download process: ",t.downloadUrl),t.downloadCallback(o.minTime,o.maxTime),jQuery(".vjs-selectionbar-RS").fadeOut();else{jQuery(".vjs-download-button").css("font-size","large");var s=0,i=e.duration();o.minTime=0,o.maxTime=e.duration(),jQuery(".vjs-selectionbar-RS").slider({range:!0,min:0,max:e.duration(),values:[0,e.duration()],slide:function(t,n){s!=parseFloat(n.values[0])?o.minTime=e.currentTime():i!=parseFloat(n.values[1])&&(o.maxTime=e.currentTime())},stop:function(e,t){s=parseFloat(t.values[0]),i=parseFloat(t.values[1])}}),jQuery(".vjs-selectionbar-RS").fadeIn()}this.inDownloadMode=!this.inDownloadMode})},createEl:function(){var e=$('<span aria-hidden="true" class="fa fa-download"></span><span class="vjs-control-text" aria-live="polite">Descarga</span>')[0];return videojs.dom.createEl("button",{},{class:"vjs-download-button vjs-control vjs-button",role:"button"},e)}});videojs.registerComponent("DownloadButton",d);var u=new d(r,a);r.controlBar.addChild(u);var c=videojs.extend(l,{constructor:function(e,t){l.apply(this,arguments)},createEl:function(){return videojs.dom.createEl("div",{},{class:"vjs-timebar-RS"},"")},children:["SeekRSBar"]});videojs.registerComponent("RSTimeBar",c);var v=new c(r,a);r.controlBar.progressControl.seekBar.addChild(v);var h=videojs.extend(l,{constructor:function(e,t){l.apply(this,arguments),this.on("mousedown",this.onMouseDown)},createEl:function(){return videojs.dom.createEl("div",{},{class:"vjs-rangeslider-holder"},"")},onMouseDown:function(t){console.log("seekbar onmousedown"),t.preventDefault(),e(document,"mousemove",videojs.bind(this,this.onMouseMove)),e(document,"mouseup",videojs.bind(this,this.onMouseUp))},onMouseUp:function(e){t(document,"mousemove",this.onMouseMove,!1),t(document,"mouseup",this.onMouseUp,!1)},onMouseMove:function(e){}});videojs.registerComponent("SeekRSBar",h);var p=new h(r,a);p.left=p.children[1],p.right=p.children[2],v.addChild(p);var f=videojs.extend(l,{constructor:function(e,t){l.apply(this,arguments),this.on("mouseup",this.onMouseUp),this.fired=!1},createEl:function(){return videojs.dom.createEl("div",{},{class:"vjs-selectionbar-RS"},"")},onMouseUp:function(){console.log(r.currentTime()),console.log(r.duration())},updateLeft:function(e){var t=""!==n.right.el_.style.left?n.right.el_.style.left:100,o=parseFloat(t)/100,s=i(o-e,n.updatePrecision);return e<=o+1e-5&&(n.bar.el_.style.left=100*e+"%",n.bar.el_.style.width=100*s+"%",!0)},updateRight:function(e){var t=""!==n.left.el_.style.left?n.left.el_.style.left:0,o=parseFloat(t)/100,s=i(e-o,n.updatePrecision);return e+1e-5>=o&&(n.bar.el_.style.width=100*s+"%",n.bar.el_.style.left=100*(e-s)+"%",!0)},activatePlay:function(e,t){this.timeStart=e,this.timeEnd=t,this.suspendPlay(),this.player_.on("timeupdate",videojs.bind(this,this._processPlay))},suspendPlay:function(){this.fired=!1,this.player_.off("timeupdate",videojs.bind(this,this._processPlay))},_processPlay:function(){if(this.player_.currentTime()>=this.timeStart&&(this.timeEnd<0||this.player_.currentTime()<this.timeEnd)){if(this.fired)return;this.fired=!0}else{if(!this.fired)return;this.fired=!1,this.player_.pause(),this.player_.currentTime(this.timeEnd),this.suspendPlay()}},process_loop:function(){var e=this.player;if(e&&this.looping){var t=e.currentTime();(t<this.timeStart||this.timeEnd>0&&this.timeEnd<t)&&e.currentTime(this.timeStart)}}});videojs.registerComponent("SelectionBar",f);var m=new f(r,a);n.left=p.children[1],n.left=p.children[2],p.addChild(m);var j=videojs.extend(l,{constructor:function(e,t){l.apply(this,arguments),this.on("mousedown",this.onMouseDown),this.pressed=!1},createEl:function(){var e=$('<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>')[0];return videojs.dom.createEl("div",{},{class:"vjs-rangeslider-handle vjs-selectionbar-left-RS"},e)},onMouseDown:function(t){t.preventDefault(),this.pressed=!0,e(document,"mouseup",videojs.bind(this,this.onMouseUp)),o(this.el_,"active")},onMouseUp:function(e){t(document,"mouseup",this.onMouseUp,!1),s(this.el_,"active"),this.pressed=!1}});videojs.registerComponent("SelectionBarLeft",j);var y=new j(r,a);p.addChild(y,{name:"SelectionBarLeft"}),n.left=y;var g=videojs.extend(l,{constructor:function(e,t){l.apply(this,arguments),this.on("mousedown",this.onMouseDown),this.pressed=!1},createEl:function(){var e=$('<div class="vjs-selectionbar-arrow-RS"></div><div class="vjs-selectionbar-line-RS"></div>')[0];return videojs.dom.createEl("div",{},{class:"vjs-rangeslider-handle vjs-selectionbar-right-RS"},e)},onMouseDown:function(t){t.preventDefault(),this.pressed=!0,e(document,"mouseup",videojs.bind(this,this.onMouseUp)),o(this.el_,"active")},onMouseUp:function(e){t(document,"mouseup",this.onMouseUp,!1),s(this.el_,"active"),this.pressed=!1}});videojs.registerComponent("SelectionBarRight",g);var w=new g(r,a);p.addChild(w),n.right=y,console.log("plugin is ready 7")}(l,videojs.mergeOptions(r,a))})};return a("alecoRangeslider",l),l.VERSION="0.0.0",l});
